(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{230:function(e,t,n){"use strict";var o=n(99),r=n(1),c=n.n(r),a=n(2),i=n(149),s=n(4),u=n.n(s),l=n(30),f=n.n(l),d=n(26),p=n(5),g=n(52),m=n(56);n(292),n(167);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){return e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}))}function v(e){var t=e.documents,n=e.setDocuments;(function(e,t){return m.firestore().collection(e).where("id","==",t||"")})(e.collection_name,e.uid).onSnapshot((function(e){var o=h(e);!function(e){var t=e.documents,n=e.downloadedDocuments,o=e.setDocuments;JSON.stringify(t)!=JSON.stringify(n)&&o(n)}({documents:t,downloadedDocuments:o,setDocuments:n})}))}m.initializeApp({apiKey:"AIzaSyA8CayNjq_3waCPH533_Haij8scNzIM_H8",authDomain:"evolve-6b9a3.firebaseapp.com",databaseURL:"https://evolve-6b9a3.firebaseio.com",projectId:"evolve-6b9a3",storageBucket:"evolve-6b9a3.appspot.com",messagingSenderId:"408948735077",appId:"1:408948735077:web:11c577a47ef8c0acac5a8c",measurementId:"G-S5DY8CVKB0"}),m.auth().onAuthStateChanged((function(e){null!=e&&console.log("We are authenticated now!"),console.log({user:e})}));var O=function(e){var t=e.uid,n=Object(r.useState)([]),o=f()(n,2),c=o[0],a=o[1];return Object(r.useEffect)((function(){return v({documents:c,setDocuments:a,collection_name:"users",uid:t})}),[t]),{users:c,setUser:function(e){!function(e){var t=e.update_dict,n=e.id,o=e.collection_name;m.firestore().collection(o).doc(n).set(t).then((function(){console.log("success")})).catch((function(e){}))}({update_dict:e,id:t,collection_name:"users"})},deleteUser:function(e){!function(e){var t=e.id,n=e.collection_name;m.firestore().collection(n).doc(t).delete().then((function(){console.log("deleted")})).catch((function(e){}))}({id:e.id,collection_name:"users"})}}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.navigation,n=Object(r.useState)(""),a=f()(n,2),i=a[0],s=a[1],u=O({uid:m.auth().currentUser.uid}),l=u.users,b=u.setUser,h=(u.deleteUser,Object(r.useState)("")),v=f()(h,2),j=v[0],S=v[1];return Object(r.useEffect)((function(){!function(){try{var e=m.auth().currentUser.uid;console.log({uid:e,users:l}),s(e)}catch(n){console.log({err:n}),t.navigate("Login")}}(),function(){try{S(l[0].phoneNumber)}catch(e){console.log({err:e}),S("")}}()}),[i,l.length]),c.a.createElement(p.a,{style:w.container},c.a.createElement(d.a,null,"Home"),c.a.createElement(g.b,{placeholder:"Phone Number",onChangeText:S,value:j}),c.a.createElement(g.a,{onPress:function(){var e=l[0];b(y(y({},e),{},{phoneNumber:j}))},title:"Submit"}),c.a.createElement(g.a,{onPress:function(){m.auth().signOut().then((function(e){console.log({response:e})})).catch((function(e){console.log({err:e})})).then((function(e){console.log({response:e}),t.navigate("Login")}))},title:"Sign Out"}),c.a.createElement(o.a,{style:"auto"}))},w=a.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});var E=function(e){var t=e.navigation,n=Object(r.useState)(""),o=f()(n,2),a=o[0],i=o[1],s=Object(r.useState)(""),u=f()(s,2),l=u[0],b=u[1],h=Object(r.useState)(""),v=f()(h,2),O=v[0],j=v[1],y=Object(r.useState)(!1),S=f()(y,2),w=(S[0],S[1]),E=Object(r.useState)(0),C=f()(E,2),D=(C[0],C[1]);return c.a.createElement(p.a,{style:P.container},c.a.createElement(g.b,{placeholder:"Email",onChangeText:b,value:l}),c.a.createElement(g.b,{placeholder:"Password",secureTextEntry:!0,onChangeText:i,value:a}),c.a.createElement(g.a,{onPress:function(){""===l?(j("Email can't be empty."),D(1)):""===a?(j("Password can't be empty."),D(1)):(w(!0),function(e){var t=e.email,n=e.password;return m.auth().signInWithEmailAndPassword(t,n)}({email:l,password:a}).then((function(e){var n=e.user.uid;m.firestore().collection("users").doc(n).get().then((function(e){if(e.exists){var n=e.data();console.log({user:n}),t.navigate("Home",{user:n})}else alert("User does not exist anymore.")})).catch((function(e){alert(e)}))})).catch((function(e){w(!1),j(String(e)),D(1)})))},title:"Login"}),c.a.createElement(g.a,{onPress:function(){(function(){var e=new m.auth.GoogleAuthProvider;return console.log({provider:e}),m.auth().signInWithPopup(e).then((function(e){return console.log({response:e})})).catch((function(e){return console.log({error:e})}))})().then((function(e){console.log({response:e})}))},title:"Google"}),c.a.createElement(g.a,{onPress:function(){t.navigate("SignUp")},title:"SignUp"}),c.a.createElement(d.a,null,O))},P=a.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});var C=function(e){var t=e.navigation,n=Object(r.useState)(""),o=f()(n,2),a=o[0],i=o[1],s=Object(r.useState)(""),u=f()(s,2),l=u[0],b=u[1],h=Object(r.useState)(""),v=f()(h,2),O=v[0],j=v[1],y=Object(r.useState)(!1),S=f()(y,2),w=(S[0],S[1]),E=Object(r.useState)(0),P=f()(E,2),C=(P[0],P[1]);return c.a.createElement(p.a,{style:D.container},c.a.createElement(g.b,{placeholder:"Email",onChangeText:b,value:l}),c.a.createElement(g.b,{placeholder:"Password",secureTextEntry:!0,onChangeText:i,value:a}),c.a.createElement(g.a,{onPress:function(){""===l?(j("Email can't be empty."),C(1)):""===a?(j("Password can't be empty."),C(1)):(w(!0),function(e){var t=e.email,n=e.password;return m.auth().createUserWithEmailAndPassword(t,n)}({email:l,password:a}).then((function(e){var n=e.user.uid,o={id:n,email:l};m.firestore().collection("users").doc(n).set(o).then((function(){t.navigate("Home",{user:o})})).catch((function(e){alert(e)}))})).catch((function(e){w(!1),console.log({error:e}),j(String(e)),C(1)})))},title:"Sign Up"}),c.a.createElement(g.a,{onPress:function(){t.navigate("Login")},title:"Back"}),c.a.createElement(d.a,null,O))},D=a.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}}),x=Object(i.createAppContainer)(Object(i.createSwitchNavigator)({Login:{screen:E},Home:{screen:S},SignUp:{screen:C}},{headerMode:"none",cardStyle:{backgroundColor:"white"}}));t.a=x,a.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},231:function(e,t,n){e.exports=n(311)}},[[231,1,2]]]);
//# sourceMappingURL=app.cae86fa2.chunk.js.map